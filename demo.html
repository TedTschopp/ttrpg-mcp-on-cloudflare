<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTRPG GM Tools - Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; }
        .tool-section {
            margin: 20px 0;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 5px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #2980b9;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-left: 4px solid #3498db;
            border-radius: 3px;
        }
        select, input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #bdc3c7;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ² TTRPG GM Tools - Interactive Demo</h1>
        <p>This demonstrates how the MCP server data can be used client-side.</p>

        <div class="tool-section">
            <h2>Generate NPC Name</h2>
            <select id="race">
                <option value="human">Human</option>
                <option value="elf">Elf</option>
                <option value="dwarf">Dwarf</option>
                <option value="halfling">Halfling</option>
                <option value="orc">Orc</option>
                <option value="goblin">Goblin</option>
            </select>
            <select id="gender">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
            <button onclick="generateName()">Generate Name</button>
            <div id="nameResult" class="result" style="display:none;"></div>
        </div>

        <div class="tool-section">
            <h2>Generate Location Name</h2>
            <select id="locationType">
                <option value="tavern">Tavern</option>
                <option value="city">City</option>
                <option value="dungeon">Dungeon</option>
                <option value="castle">Castle</option>
            </select>
            <button onclick="generateLocation()">Generate Location</button>
            <div id="locationResult" class="result" style="display:none;"></div>
        </div>

        <div class="tool-section">
            <h2>Generate Personality Trait</h2>
            <button onclick="generateTrait()">Generate Trait</button>
            <div id="traitResult" class="result" style="display:none;"></div>
        </div>

        <div class="tool-section">
            <h2>Generate Plot Hook</h2>
            <select id="theme">
                <option value="mystery">Mystery</option>
                <option value="combat">Combat</option>
                <option value="intrigue">Intrigue</option>
                <option value="exploration">Exploration</option>
                <option value="horror">Horror</option>
            </select>
            <button onclick="generatePlotHook()">Generate Hook</button>
            <div id="hookResult" class="result" style="display:none;"></div>
        </div>
    </div>

    <script>
        // In production, these would be loaded from the GitHub Pages URLs
        // For now, we'll simulate with fetch calls
        
        async function loadData(filename) {
            const response = await fetch(`{{ site.baseurl }}/_data/${filename}`);
            return await response.json();
        }

        async function generateName() {
            const race = document.getElementById('race').value;
            const gender = document.getElementById('gender').value;
            
            try {
                const data = await loadData('names.json');
                const names = data.names[race][gender];
                const randomName = names[Math.floor(Math.random() * names.length)];
                
                const result = document.getElementById('nameResult');
                result.innerHTML = `<strong>${randomName}</strong> (${race} ${gender})`;
                result.style.display = 'block';
            } catch (error) {
                console.error('Error generating name:', error);
            }
        }

        async function generateLocation() {
            const type = document.getElementById('locationType').value;
            
            try {
                const data = await loadData('locations.json');
                const prefixes = data.locations[type].prefixes;
                const suffixes = data.locations[type].suffixes;
                
                const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
                const locationName = `${prefix} ${suffix}`;
                
                const result = document.getElementById('locationResult');
                result.innerHTML = `<strong>${locationName}</strong>`;
                result.style.display = 'block';
            } catch (error) {
                console.error('Error generating location:', error);
            }
        }

        async function generateTrait() {
            try {
                const data = await loadData('traits.json');
                const allTraits = [
                    ...data.traits,
                    ...data.ideals,
                    ...data.bonds,
                    ...data.flaws,
                    ...data.quirks
                ];
                
                const randomTrait = allTraits[Math.floor(Math.random() * allTraits.length)];
                
                const result = document.getElementById('traitResult');
                result.innerHTML = `<strong>${randomTrait}</strong>`;
                result.style.display = 'block';
            } catch (error) {
                console.error('Error generating trait:', error);
            }
        }

        async function generatePlotHook() {
            const theme = document.getElementById('theme').value;
            
            try {
                const data = await loadData('plot_hooks.json');
                const hooks = data.plot_hooks[theme];
                const randomHook = hooks[Math.floor(Math.random() * hooks.length)];
                
                const result = document.getElementById('hookResult');
                result.innerHTML = `<strong>${randomHook}</strong>`;
                result.style.display = 'block';
            } catch (error) {
                console.error('Error generating plot hook:', error);
            }
        }
    </script>
</body>
</html>
